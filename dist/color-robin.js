!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ColorRobin=e():t.ColorRobin=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function n(){this._keys=[],this._values=[],this.set=function(t,e){let n=this._keyIndex(t);n>=0?this._values[n]=e:(this._keys.push(t),this._values.push(e))},this.get=function(t){let e=this._keyIndex(t);return e>=0?this._values[e]:null},this.getValues=function(){return this._values.slice()},this._keyIndex=function(t){for(let e=0;e<this._keys.length;e++)if(this._keys[e]==t)return e;return-1}}function s(){this._tolerance=100,this.create=function(t){let e=new n;for(let n=0;n<t.length;n++){let s=t[n],o=this._combineRGB(s,this._tolerance),i=e.get(o);null!=i?(i.total++,i.data.push(s)):(i={total:1,data:[s]},e.set(o,i))}let s=e.getValues();return s.sort(this._sortMapByOccurences),s},this.setTolerance=function(t){this._tolerance=t},this._combineRGB=function(t,e){return(((t[0]/e|0)*e<<8)+(t[1]/e|0)*e<<8)+(t[2]/e|0)*e},this._sortMapByOccurences=function(t,e){return e.total-t.total}}t.d(e,{default:()=>o});const o={Analyzer:function(){this._resolution=20,this._canvas=document.createElement("canvas"),this._canvas.width=this._resolution,this._canvas.height=this._resolution,this.analyze=function(t,e){let n=this._groupToPixels(this._getImageData(t)),o=new s;null!=e&&o.setTolerance(e);let i=o.create(n),r=[];for(let t=0;t<i.length;t++){let e={occurrences:i[t].total,color:this._averageColor(i[t].data)};r.push(e)}return r},this.setResolution=function(t){this._resolution=t,this._canvas.width=this._resolution,this._canvas.height=this._resolution},this._getImageData=function(t){let e=this._canvas.getContext("2d");return e.fillStyle="red",e.drawImage(t,0,0,this._resolution,this._resolution),e.getImageData(0,0,this._canvas.width,this._canvas.height)},this._groupToPixels=function(t){let e=[];for(let n=0;n<t.data.length;n+=4){let s=[t.data[n],t.data[n+1],t.data[n+2]];e.push(s)}return e},this._averageColor=function(t){let e=0,n=0,s=0;for(let o=0;o<t.length;o++)e+=t[o][0],n+=t[o][1],s+=t[o][2];return e=e/t.length|0,n=n/t.length|0,s=s/t.length|0,[e,n,s]}},toRgbString:function(t){return"rgb("+t[0]+","+t[1]+","+t[2]+")"}};return e.default})()}));